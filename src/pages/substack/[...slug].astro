---
// Redirect from /substack/slug to /substack/p/slug
const { slug } = Astro.params;

// Handle array of slugs
const slugPath = Array.isArray(slug) ? slug.join('/') : slug;
const redirectUrl = `/substack/p/${slugPath}`;

// Use server-side redirect
return Astro.redirect(redirectUrl, 301);
--- 